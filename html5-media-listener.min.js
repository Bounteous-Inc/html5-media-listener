!function(a,b){"use strict";function c(){function b(a){var b,c,d,e=a.target;for(c in s)if(e.matches(c))for(b in s[c])for(d in s[c][b])s[c][b][d].forEach(function(a){v[a[u]]={percentages:{},seconds:{}}})}function c(c,d,e){e[u]||(e[u]=t,v[t]={percentages:{},seconds:{}},t++),d.events&&j(c,d.events,e),d.percentages&&l(c,d.percentages,e),d.seconds&&m(c,d.seconds,e),w._clearCaches||(a.addEventListener("durationchange",b,!0),w._clearCaches=b)}function e(a,b){return function(c,d,e){"object"==typeof c&&"function"==typeof d&&(e=d,d=c,c="*"),"*"!==c.slice(-1)&&(c+=","+c+" *"),b&&(s[c]=s[c]||{percentage:{},seconds:{},events:{}});var f=s[c];f&&a(f,d,e)}}function f(a,b,c){b.events&&g(a,b.events,c),b.percentages&&h(a,b.percentages,c),b.seconds&&i(a,b.seconds,c),w={}}function g(a,b,c){var d,e,f,g=a.events;for(f=0;f<b.length;f++)e=b[f],(d=g[e]?g[e].indexOf(c):-1)>-1&&g[e].splice(d,1)}function h(a,b,c){var d,e,f,g=a.percentages,h=(b.each||[]).concat(k(b.every||[]));for(f=0;f<h.length;f++)e=h[f],(d=g[e]?g[e].indexOf(c):-1)>-1&&g[e].splice(d,1)}function i(a,b,c){var d,e,f,g=a.seconds;for(f=0;f<b.each.length;f++)e=b.each[f],(d=g[e]?g[e].indexOf(c):-1)>-1&&g[e].splice(d,1);for(f=0;f<b.every.length;f++)e=b.every[f],(d=g[e]?g[e].indexOf(c):-1)>-1&&g[e].splice(d,1)}function j(b,c,d){c.forEach(function(b){var c;w[b]||(c=o(p),a.addEventListener(b,c,!0),w[b]=c)});var e,f,g=b.events;for(f=0;f<c.length;f++)e=c[f],g[e]=g[e]||[],-1===g[e].indexOf(d)&&g[e].push(d)}function k(a){var b,c,d,e={};for(c=0;c<a.length;c++)for(b=100/a[c],d=1;d<=b;d++)e[a[c]*d]=!0;return Object.keys(e).map(Number).sort(function(a,b){return a>b?1:b>a?-1:0})}function l(b,c,d){var e;w._timeupdate||(e=o(q),a.addEventListener("timeupdate",e,!0),w._timeupdate=e);var f,g,h=(c.each||[]).concat(k(c.every||[])),i=b.percentage;for(g=0;g<h.length;g++)f=h[g],i[f]=i[f]||[],-1===i[f].indexOf(d)&&i[f].push(d)}function m(b,c,d){var e;w._timeupdate||(e=o(q),a.addEventListener("timeupdate",e,!0),w._timeupdate=e);var f,g,h,i,j,k=b.seconds;if(c.each&&c.each.length)for(i=0;i<c.each.length;i++)h=c.each[i],k[h]=k[h]||[],-1===(g=k[h].indexOf(d))&&k[h].push(d);if(c.every&&c.every.length)for(i=0;i<c.every.length;i++){for(h=c.every[i],k[h]=k[h]||[],f=n(h,h,k,d),f.original=d,j=0;j<k[h].length;j++)if(k[h][j].original===d){g=j;break}-1===g&&k[h].push(f)}}function n(a,b,c,e){return function(f){var g,h,i,j=f.player,k=[a],l=j.currentTime;if(l>a+b)for(g=Math.floor((l-a)/a),i=1;i<g+1;i++)k.push(i*b+a);k.forEach(function(a){e.call(j,{player:j,label:d(a),seconds:a})}),j.ended||(h=(g+1)*b+a,c[h]=c[h]||[],c[h].push(n(h,b,c)))}}function o(a){return function(b){b.isTrusted&&a.call(b.target,b)}}function p(a){var b,c,d=a.target,e=a.type,f=Math.ceil(d.currentTime);if("pause"!==e||!d.ended)for(b in s)d.matches(b)&&(c=s[b].events,c[e]&&c[e].length&&c[e].forEach(function(a){a({player:d,label:e,seconds:f})}))}function q(a){var b,c,e,f,g,h,i=a.target,j=Math.ceil(i.currentTime),k=Math.ceil(j/i.duration*100),l=[];for(b in s)if(i.matches(b)){if(c=s[b],c.percentage)for(g in c.percentage)Number(g)<=k&&c.percentage[g].forEach(function(a){var b=a[u]||a.original[u],c=v[b].percentages;c[g]||(l.push([a,{player:i,label:g+"%",seconds:Math.ceil(i.duration*g/100)}]),c[g]=!0)});if(c.seconds)for(g in c.seconds)Number(g)<=j&&c.seconds[g].forEach(function(a){var b=a[u]||a.original[u],c=v[b].seconds;c[g]||(l.push([a,{player:i,label:d(Number(g)),seconds:Number(g)}]),c[g]=!0)});for(l.sort(function(a,b){return a[1].seconds>b[1].seconds?1:b[1].seconds>a[1].seconds?-1:0});l.length;)e=l.shift(),h=e[0],f=e[1],h.call(i,f)}}function r(){var b,c;for(b in w)a.removeEventListener(b,w[b],!0);a.removeEventListener("timingupdate",w._timeupdate,!0);for(c in s)delete s[c]}var s={},t=1,u="__html5MediaListenerHandlerId__",v={},w={};return{on:e(c,!0),off:e(f),destroy:r,_translateSeconds:d,_calcEveryPercentage:k}}function d(a){var b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60);return[b,c,a-3600*b-60*c].map(function(a){return 1===(a+"").length?"0"+a:a+""}).join(":")}function e(){b.Html5MediaListener=function(){return{on:f,destroy:f,off:f}}}function f(){}if(b.navigator.userAgent.match(/MSIE [678]/gi))return e();b.Html5MediaListener=c(),b.Html5MediaListener._constructor=c}(document,window);
/*
 * v1.0.0
 * Created by the Google Analytics consultants at http://www.lunametrics.com/
 * Written by @notdanwilkerson
 * Documentation: https://github.com/lunametrics/html5-media-listener/
 * Licensed under the MIT License
 */