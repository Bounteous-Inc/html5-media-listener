!function(a,b){"use strict";function c(a,b,c){c[x]||(c[x]=w,y[w]={},w++),b.events&&i(a,b.events,c),b.percentages&&k(a,b.percentages,c),b.seconds&&l(a,b.seconds,c)}function d(a,b){return function(c,d,e){"object"==typeof c&&"function"==typeof d&&(e=d,d=c,c="*"),"*"!==c.slice(-1)&&(c+=","+c+" *"),b&&(v[c]=v[c]||{percentage:{},seconds:{},events:{}});var f=v[c];f&&a(f,d,e)}}function e(a,b,c){b.events&&f(a,b.events,c),b.percentages&&g(a,b.percentages,c),b.seconds&&h(a,b.seconds,c),z={}}function f(a,b,c){var d,e,f,g=a.events;for(f=0;f<b.length;f++)e=b[f],(d=g[e]?g[e].indexOf(c):-1)>-1&&g[e].splice(d,1)}function g(a,b,c){var d,e,f,g=a.percentages,h=(b.each||[]).concat(j(b.every||[]));for(f=0;f<h.length;f++)e=h[f],(d=g[e]?g[e].indexOf(c):-1)>-1&&g[e].splice(d,1)}function h(a,b,c){var d,e,f,g=a.seconds;for(f=0;f<b.each.length;f++)e=b.each[f],(d=g[e]?g[e].indexOf(c):-1)>-1&&g[e].splice(d,1);for(f=0;f<b.every.length;f++)e=b.every[f],(d=g[e]?g[e].indexOf(c):-1)>-1&&g[e].splice(d,1)}function i(b,c,d){c.forEach(function(b){var c;z[b]||(c=n(o),a.addEventListener(b,c,!0),z[b]=c)});var e,f,g=b.events;for(f=0;f<c.length;f++)e=c[f],g[e]=g[e]||[],-1===g[e].indexOf(d)&&g[e].push(d)}function j(a){var b,c,d,e={};for(c=0;c<a.length;c++)for(b=100/a[c],d=1;d<=b;d++)e[a[c]*d]=!0;return Object.keys(e).map(Number).sort(function(a,b){return a>b?1:b>a?-1:0})}function k(b,c,d){var e;z._timeupdate||(e=n(p),a.addEventListener("timeupdate",e,!0),z._timeupdate=e);var f,g,h=(c.each||[]).concat(j(c.every||[])),i=b.percentage;for(g=0;g<h.length;g++)f=h[g],i[f]=i[f]||[],-1===i[f].indexOf(d)&&i[f].push(d)}function l(b,c,d){z._timeupdate||(a.addEventListener("timeupdate",n(p),!0),z._timeupdate=!0);var e,f,g,h,i,j=b.seconds;for(h=0;h<c.each.length;h++)g=c.each[h],j[g]=j[g]||[],-1===(f=j[g].indexOf(d))&&j[g].push(d);for(h=0;h<c.every.length;h++){for(g=c.every[h],j[g]=j[g]||[],e=m(g,g,j,d),e.original=d,i=0;i<j[g].length;i++)if(j[g][i].original===d){f=i;break}-1===f&&j[g].push(e)}}function m(a,b,c,d){return function(e){var f,g,h,i=e.player,j=[a],k=i.currentTime;if(k>a+b)for(f=Math.floor((k-a)/a),h=1;h<f+1;h++)j.push(h*b+a);j.forEach(function(a){t(function(){d.call(i,{player:i,label:r(a),seconds:a})})}),i.ended||(g=(f+1)*b+a,c[g]=m(g,b,c))}}function n(a){return function(b){b.isTrusted&&a.call(b.target,b)}}function o(a){var b,c,d=a.target,e=a.type,f=Math.ceil(d.currentTime);if("pause"!==e||!d.ended)for(b in v)d.matches(b)&&(c=v[b].events,c[e]&&c[e].length&&c[e].forEach(function(a){a({player:d,label:e,seconds:f})}))}function p(a){var b,c,d,e=a.target,f=Math.ceil(e.currentTime),g=Math.ceil(f/e.duration*100);for(b in v)if(e.matches(b)){if(c=v[b],c.percentage)for(d in c.percentage)Number(d)<=g&&c.percentage[d].forEach(function(a){var b=a[x]||a.original[x],c=y[b];c[d]||(a.call(e,{player:e,seconds:Math.ceil(e.duration*d/100),label:d+"%"}),c[d]=!0)});if(c.seconds)for(d in c.seconds)Number(d)<=f&&c.seconds[d].forEach(function(a){var b=a[x]||a.original[x],c=y[b];c[d]||(a({player:e,seconds:Number(d),label:r(Number(d))}),c[d]=!0)})}}function q(){var b,c;for(b in z)a.removeEventListener(b,z[b],!0);a.removeEventListener("timingupdate",z._timeupdate,!0);for(c in v)delete v[c]}function r(a){var b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60);return[b,c,a-3600*b-60*c].map(function(a){return 1===(a+"").length?"0"+a:a+""}).join(":")}function s(){b.Html5MediaListener=function(){return{on:u,destroy:u,off:u}}}function t(a){return setTimeout(a,0)}function u(){}if(b.navigator.userAgent.match(/MSIE [678]/gi))return s();var v={},w=1,x="__html5MediaListenerHandlerId__",y={},z={};b.Html5MediaListener=function(){return{on:d(c,!0),off:d(e),destroy:q,_translateSeconds:r,_calcEveryPercentage:j,bound:z}}}(document,window);
/*
 * v1.0.0
 * Created by the Google Analytics consultants at http://www.lunametrics.com/
 * Written by @notdanwilkerson
 * Documentation: https://github.com/lunametrics/html5-media-listener/
 * Licensed under the MIT License
 */